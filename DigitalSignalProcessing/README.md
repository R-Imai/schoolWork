# FourieTransform.py使用方法

## 環境設定
### pythonインストール
> ※ 2015/12/09環境変数のところを一部修正しました。<br>

このプログラムはpython3.4を使用して書かれています。
pythonを使用したことの無い方は[こちら](https://www.python.org/downloads/release/python-343/ "Python.org")からインストーラーをダウンロードしてください。<br>
ダウンロードができたら、そのファイルを開きpythonインストーラーを起動します。<br>
特にこだわりがなければそのまま「次へ」等でインストールを開始します。<br>
終わったら次にパスの設定があるので、[windows]+[e]でエクスプローラを開き、右上にある「システムのプロパティ」をクリック。<br>
左側にある「システムの詳細設定」へ移動します。
出てきたウィンドウの下の方の「環境変数(N)」をクリック。<br>
「システム環境変数」の中の「Path」をクリックし、「編集」をクリックします。<br>
「変数値」の最後に元から書いてあるものを消さないように`C:\Python34;C:\Python34\Scripts;`と加えてください。(**最初に書いてある状態で「;」で終わっていなければ、「;」を付けてください**)<br>
パスが通ったか確認するのでコマンドプロンプトを開きます。([Windows]+[R]で出てきたやつに「cmd」と打ちエンター)<br>
「python」とうちエラーが出なかったらOKです。
### 各種ライブラリインストール
今回使用するライブラリは、<br>
・ [numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy "numpy")<br>
・ [scipy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy "scipy")<br>
・ [matplotlib](http://www.lfd.uci.edu/~gohlke/pythonlibs/#matplotlib "matplotlib")<br>
の三つです。上記がリンクになったいるのでそれぞれ自分のバージョンに合っているもの(この場合は3.4なのでcp34、win32とwinはbit数の違いです)<br>
それぞれダウンロードして来たら、画面左下にあるウィンドウズボタンを右クリックして、「コマンドプロンプト(**管理者**)」を開きます。<br>
そこに、
`pip install ダウンロードしてきたファイル`
と打って上記三種類をインストールします。<br>
この時、ダウンロードしてきたファイルの部分に絶対パスを打ち込むのは大変なので、[windows]+[e]からダウンロードフォルダに移動してダウンロードしてきたファイルを選択。左上の「パスのコピー」を選択して、コマンドプロンプト上で右クリックして「貼り付け」をすることをお勧めします。(もしかしたらただ単にドラックアンドドロップでできるかもしれない。)<br>
※python2.7等だとpipがインストールされていない場合があります。その際は[このサイト](http://www.aoki.ecei.tohoku.ac.jp/~ito/python_windows.html "pip のインストール方法等")を参照してください。<br>
ちゃんとインストールできたか確認します。コマンドプロンプトで、「python」と打ってから
```python
import numpy
import scipy
import matplotlib
```
と打ちこんでなにも出なければ設定は完了です。

## FourieTransform.py使用方法
> 2015/12/10　プロット内容を指定できるように変更<br>
> 2015/12/17　3Dプロット内容を勘違いしていたので修正

このプログラムはフーリエ変換をしてグラフ出力するものです。
使用しているのはscipyのfftpackです。
まずGitHubから任意の場所へFourieTransform.pyをダウンロードして解析したいデータと同じところにおいてください。
(ダウンロードはFourieTransform.pyをクリックして、コード右上のRawを右クリックして「名前を付けてリンク先を保存」で名前は変えずダウンロードしてください)
コマンドプロンプトを開き、
`cd ダウンロードしたフォルダまでのパス`
とうち、そのフォルダまで移動します。
次に
`start python FourieTransform.py 入力ファイル名 サンプリング間隔 モード指定 値1 値2 保存先ファイル名 プロット内容`
の順で入力してください。(startはあってもなくても平気ですが、あると別ウィンドウで開くので、途中で強制終了させるのが楽です。モードにより使わない部分があるのでそれは入力せず飛ばしてください)<br>
ここでモード指定以降は以下に従って入力してください。<br>
* 出力について:<br>
    * p: その場にプロット<br>
    * s: 画像を保存(この場合、(保存先ファイル名)のところに保存したいファイル名を拡張子なしで指定)<br>
    * csv: csvファイルで保存((保存先ファイル名)に保存したいファイル名を拡張子なしで指定)<br>
* フーリエ変換の範囲について
    * -a: すべての区間　　　　　(値1)(値2)は入力なし<br>
    * -n: N間隔ですべての領域　 (値1)にNの値を指定。最初からN間隔で半周期ずらしてフーリエ変換<br>
    * -s: 開始点のみ(値1)に指定　　　　(値2)は入力なし<br>
    * -f: 終端点のみ(値1)に指定　　　　(値2)は入力なし<br>
    * -p: 開始点,終端点を(値1)(値2)に指定<br>
* 窓関数について
    * -hm: ハミング窓
    * -hn: ハ二ング窓
    * -bk: ブラックマン窓
    * -ga: ガウス窓
    * -bar: バートレット窓
    * -rect: 矩形窓(信号そのまま。何も書かない場合これになる)<br>

窓関数が何かは自分で調べるか聞くかしてください(^^)<br>
* プロット内容について<br>
    プロット内容は、出力内容を指定する所です。2Dなら最大4つまで指定でき、それぞれの間は-でつないでください(記述がない場合はデフォルト値(o-w-p-f)になります)
    * o: オリジナルの信号
    * r: フーリエ実数部
    * i: フーリエ虚数部
    * w: 窓関数
    * f: フーリエ変換結果
    * p: 窓関数をかけた後の信号
    * 3D: 3Dプロット(3Dの場合は一つだけ,かつ範囲指定がnの時のみ可能です)

例えば,サンプリング間隔16kHzのsignal.txtを全区間ハミング窓でフーリエ変換をしその場に「オリジナルの信号、フーリエ実数部、フーリエ虚数部、フーリエ変換結果」表示する場合は、
`python FourieTransform.py signal.txt 16 p-a-hm o-r-i-f`<br>
サンプリング間隔16kHzのsignal.txtをN = 256 で順番にブラックマン窓でフーリエ変換をし3D図を3DFig.png...と保存したい場合は、
`python FourieTransform.py signal.txt 16 s-n-bk 256 3DFig 3D`
と入力すればOKです。<br>

この使い方は
`python FourieTransform.py help`
でも確認できます。<br><br>
以上が正しく入力出来ているとグラフが表示されるはずです。

#### 今後予定している追加機能
~~・ 自動で保存~~(2015/12/01完了)<br>
~~・ 窓関数の追加~~(2015/12/01完了)<br>
~~・ グラフの横軸の値の修正~~(2015/12/08おそらく完了)<br>
~~・ 3D表示とプロット内容を指定できるようにした~~(2015/12/17完了)<br><br>
その他アドバイス、意見等があれば遠慮なくお願いします。<br>
グラフに表示したい内容もあったら言ってくれたらやるかもしれないです(やらないかもしれないw)。<br>
ちなみにコードをいじると簡単にグラフの色を変えられます。(聞いてくれたら教えます)<br>
この説明書の見にくかったり、やったのにできなかったところも教えてください。
